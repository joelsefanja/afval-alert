<!-- Mobile-first Foto Upload -->
<div class="flex flex-col h-screen bg-gray-50">
  <!-- Header -->
  <div class="p-4 text-center">
    <h2 class="text-xl font-semibold text-gray-800">{{ stapHeader() }}</h2>
    <p class="text-sm text-gray-600">Maak een duidelijke foto van het afval.</p>
  </div>

  <!-- Main Content -->
  <div class="flex-1 overflow-y-auto">
    <app-foto-voorvertoning
      [fotoUrl]="krijgFotoUrl()"
      [isBevestigen]="isBezig()"
      [uploadStatus]="krijgUploadStatus()"
      (fotoVerwijderd)="onFotoVerwijderd()"
      (fotoBevestigd)="onFotoBevestigd()"
      [hidden]="!heeftFoto()"
    ></app-foto-voorvertoning>
    <app-camera-preview
      (fotoGeselecteerd)="onFotoGeselecteerd($event)"
      (cameraFout)="onCameraFout($event)"
      [hidden]="heeftFoto()"
    ></app-camera-preview>
  </div>

  <!-- Status & Progress -->
  @if (classificatieBezig()) {
    <div class="p-4 border-t bg-white">
      <div class="flex items-center justify-center gap-3">
        <p-progressSpinner styleClass="w-6 h-6"></p-progressSpinner>
        <p class="text-sm text-gray-700">Bezig met analyseren...</p>
      </div>
    </div>
  }

  <!-- Footer met actieknoppen -->
  <div class="p-4 bg-white shadow-top">
    @if (heeftFoto()) {
      <div class="flex gap-3">
        <p-button
          label="Andere foto"
          icon="pi pi-refresh"
          (onClick)="onFotoVerwijderd()"
          styleClass="p-button-secondary p-button-outlined flex-1"
        ></p-button>
        <p-button
          [label]="isBezig() ? 'Bezig...' : 'Volgende'"
          icon="pi pi-arrow-right"
          [disabled]="isBezig()"
          (onClick)="onVolgende()"
          styleClass="p-button-primary flex-1"
        ></p-button>
      </div>
    } @else {
      <p-button
        label="Volgende"
        icon="pi pi-arrow-right"
        (onClick)="onVolgendeZonderFoto()"
        styleClass="p-button-primary w-full"
      ></p-button>
    }
  </div>
</div>

<!-- Toast Messages -->
<p-toast></p-toast>
