<div class="max-w-2xl mx-auto p-4 space-y-6 motion-preset-fade-in">
  <!-- Terug knop -->
  <p-button 
    icon="pi pi-arrow-left" 
    label="Terug" 
    variant="text" 
    size="small"
    (onClick)="terug()"
    class="!p-0"
  />
  
  <!-- Header -->
  <div class="text-center space-y-4">
    <h1 class="text-2xl lg:text-3xl font-bold text-surface-900 dark:text-surface-0">
      Maak een foto van het afval
    </h1>
    <p-card class="bg-surface-50 dark:bg-surface-800">
      <p class="text-sm text-surface-600 dark:text-surface-300 m-0">
        Houd je telefoon recht en tik op de foto knop.<br>
        De app maakt de foto kleiner en stuurt hem meteen naar de gemeente.
      </p>
    </p-card>
  </div>

  <!-- Error message -->
  @if (state.fotoError()) {
    <p-message 
      severity="error" 
      [text]="state.fotoError()"
      class="motion-preset-shake"
    />
  }
  
  <!-- Camera view -->
  @if (cameraActive()) {
    <div class="space-y-4">
      <p-card class="!p-0 overflow-hidden">
        <div class="relative bg-surface-900 rounded-lg overflow-hidden">
          <video 
            #videoElement
            autoplay 
            playsinline 
            muted
            class="w-full h-64 lg:h-80 object-cover"
            (loadedmetadata)="onVideoLoaded(videoElement)"
          ></video>
          
          <!-- Camera controls overlay -->
          <div class="absolute bottom-4 left-0 right-0 flex justify-center items-center gap-4">
            <p-button 
              icon="pi pi-times" 
              severity="secondary"
              [rounded]="true"
              size="large"
              (onClick)="stopCamera()"
              class="!w-12 !h-12"
            />
            
            <!-- Foto knop - typische camera stijl met SpeedDial -->
            <p-speedDial 
              [model]="speedDialItems" 
              [radius]="80" 
              type="circle" 
              [hideOnClickOutside]="false"
              buttonClass="p-button-rounded p-button-lg"
              class="!w-16 !h-16"
            ></p-speedDial>
          </div>
          
          <!-- Camera instructies overlay -->
          <div class="absolute top-2 left-0 right-0 text-center">
            <p-chip label="Richt op het afval" icon="pi pi-info-circle" class="bg-surface-900/70 text-white"></p-chip>
          </div>
        </div>
      </p-card>
    </div>
  }
  
  <!-- Foto preview -->
  @else if (state.fotoUrl()) {
    <div class="space-y-4 motion-preset-scale-in">
      <p-card class="!p-0 overflow-hidden">
        <div class="relative">
          <p-image 
            [src]="state.fotoUrl()" 
            alt="Gemaakte foto"
            [preview]="true"
            imageClass="w-full h-64 lg:h-80 object-cover rounded-lg"
            [previewImageSrc]="state.fotoUrl()"
          ></p-image>
          <p-button 
            icon="pi pi-times" 
            severity="secondary"
            [rounded]="true"
            size="small"
            (onClick)="annuleerFoto()"
            class="!absolute !top-2 !right-2 !w-8 !h-8"
          />
        </div>
      </p-card>
      
      <p-button 
        label="Volgende" 
        icon="pi pi-arrow-right" 
        iconPos="right"
        size="large"
        (onClick)="volgende()"
        class="w-full"
      />
    </div>
  }
  
  <!-- Foto opties -->
  @else {
    <div class="space-y-4 motion-preset-fade-in">
      <p-card>
        <div class="grid grid-cols-1 gap-4">
          <p-button 
            label="📷 Maak foto" 
            icon="pi pi-camera"
            size="large"
            (onClick)="startCamera()"
            class="!h-16 !text-lg"
          />
          <p-divider>
            <span class="text-xs text-surface-500">OF</span>
          </p-divider>
          <p-button 
            label="🖼️ Kies uit galerij" 
            icon="pi pi-images"
            variant="outlined"
            size="large"
            (onClick)="kiesFotoUitGalerij()"
            class="!h-16 !text-lg"
          />
        </div>
      </p-card>
      
      <!-- File upload component -->
      <p-card>
        <div class="text-center mb-3">
          <i class="pi pi-upload text-2xl text-surface-500"></i>
          <h3 class="text-lg font-medium mt-2">Upload een foto</h3>
        </div>
        <p-fileUpload 
          mode="basic" 
          accept="image/*" 
          (onSelect)="onFileSelect($event)"
          (onUpload)="onFileUpload($event)"
          [auto]="true"
          chooseLabel="Selecteer bestand"
          chooseIcon="pi pi-file-image"
          class="w-full">
        </p-fileUpload>
      </p-card>
    </div>
  }
</div>